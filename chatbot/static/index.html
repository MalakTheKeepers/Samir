<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Samir - Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); overflow: hidden; }
        header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; }
        header h1 { font-size: 2.5rem; margin-bottom: 10px; }
        header p { font-size: 1.1rem; opacity: 0.9; }
        .tabs { display: flex; background: #f8f9fa; border-bottom: 1px solid #e9ecef; }
        .tab-btn { flex: 1; padding: 15px 20px; border: none; background: transparent; cursor: pointer; font-size: 1rem; font-weight: 500; color: #6c757d; transition: all 0.3s ease; border-bottom: 3px solid transparent; }
        .tab-btn:hover { background: #e9ecef; color: #495057; }
        .tab-btn.active { color: #667eea; border-bottom-color: #667eea; background: white; }
        .tab-content { display: none; padding: 30px; min-height: 500px; }
        .tab-content.active { display: block; }
        .chat-container { min-height: 400px; height: auto; display: flex; flex-direction: column; flex: 1; }
        .topic-buttons { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-bottom: 15px; padding: 15px; background: #f8f9fa; border-radius: 10px; border: 1px solid #e9ecef; }
        .topic-btn { padding: 10px 15px; background: #667eea; color: white; border: none; border-radius: 20px; cursor: pointer; font-size: 0.9rem; font-weight: 500; transition: all 0.3s ease; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .topic-btn:hover { background: #5a6fd8; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        .messages { flex: 1; overflow-y: auto; padding: 20px; background: #f8f9fa; border-radius: 15px; margin-bottom: 20px; border: 1px solid #e9ecef; }
        .message { margin: 15px 0; padding: 12px 18px; border-radius: 18px; max-width: 80%; word-wrap: break-word; animation: fadeIn 0.3s ease; }
        .message.user { background: #667eea; color: white; margin-left: auto; text-align: right; }
        .message.bot { background: white; color: #333; border: 1px solid #e9ecef; margin-right: auto; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .input-area { display: flex; gap: 10px; align-items: center; }
        #user-input { flex: 1; padding: 15px 20px; border: 2px solid #e9ecef; border-radius: 25px; font-size: 1rem; outline: none; transition: border-color 0.3s ease; }
        #user-input:focus { border-color: #667eea; }
        .send-btn { padding: 15px 20px; background: #667eea; color: white; border: none; border-radius: 50%; cursor: pointer; font-size: 1.2rem; transition: all 0.3s ease; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; }
        .send-btn:hover { background: #5a6fd8; transform: scale(1.05); }
        .quiz-list { display: grid; gap: 15px; margin-top: 20px; }
        .quiz-item { padding: 20px; background: #f8f9fa; border-radius: 10px; border: 2px solid #e9ecef; cursor: pointer; transition: all 0.3s ease; }
        .quiz-item:hover { border-color: #667eea; background: #e3f2fd; transform: translateY(-2px); }
        .quiz-item h4 { color: #333; margin-bottom: 5px; }
        .quiz-item p { color: #6c757d; font-size: 0.9rem; }
        .quiz-content { margin-top: 20px; }
        .quiz-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 2px solid #e9ecef; }
        .quiz-progress { background: #667eea; color: white; padding: 8px 16px; border-radius: 20px; font-weight: 500; }
        .quiz-question { font-size: 1.3rem; font-weight: 500; margin-bottom: 25px; color: #333; }
        .quiz-options { margin-bottom: 30px; }
        .option { display: block; width: 100%; padding: 15px 20px; margin: 10px 0; background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 10px; cursor: pointer; transition: all 0.3s ease; text-align: left; font-size: 1rem; }
        .option:hover { border-color: #667eea; background: #e3f2fd; }
        .option.selected { border-color: #667eea; background: #e3f2fd; color: #667eea; font-weight: 500; }
        .option.correct { border-color: #28a745; background: #d4edda; color: #155724; }
        .option.incorrect { border-color: #dc3545; background: #f8d7da; color: #721c24; }
        .quiz-controls { display: flex; gap: 15px; justify-content: center; }
        .quiz-controls button { padding: 12px 24px; border: none; border-radius: 25px; cursor: pointer; font-size: 1rem; font-weight: 500; transition: all 0.3s ease; }
        #prev-btn, #next-btn { background: #6c757d; color: white; }
        #prev-btn:hover, #next-btn:hover { background: #5a6268; }
        #prev-btn:disabled { background: #e9ecef; color: #6c757d; cursor: not-allowed; }
        #submit-btn { background: #28a745; color: white; }
        #submit-btn:hover { background: #218838; }
        .quiz-results { text-align: center; padding: 30px; background: #f8f9fa; border-radius: 15px; margin-top: 20px; }
        .score { font-size: 2rem; font-weight: bold; color: #667eea; margin-bottom: 15px; }
        @media (max-width: 768px) { 
            .container { margin: 10px; border-radius: 15px; } 
            header { padding: 20px; } 
            header h1 { font-size: 2rem; } 
            .tab-content { padding: 20px; } 
            .quiz-controls { flex-direction: column; } 
            .quiz-controls button { width: 100%; } 
            
            /* Mobile-specific chat message improvements */
            .messages {
                padding: 25px 15px !important;
                font-size: 1.1rem !important;
                line-height: 1.6 !important;
                min-height: 50vh !important;
                height: auto !important;
                overflow-y: auto !important;
                scroll-behavior: smooth !important;
                flex: 1 !important;
            }
            
            .message {
                font-size: 1.2rem !important;
                padding: 20px 25px !important;
                margin: 22px 0 !important;
                line-height: 1.8 !important;
                max-width: 95% !important;
                border-radius: 22px !important;
                word-wrap: break-word !important;
            }
            
            .message.user {
                font-size: 1.2rem !important;
                padding: 20px 25px !important;
                line-height: 1.7 !important;
            }
            
            .message.bot {
                font-size: 1.2rem !important;
                padding: 20px 25px !important;
                line-height: 1.9 !important;
                word-spacing: 0.15em !important;
                letter-spacing: 0.02em !important;
            }
            
            .topic-btn {
                font-size: 1.1rem !important;
                padding: 16px 22px !important;
                line-height: 1.5 !important;
            }
            
            .topic-buttons {
                padding: 25px !important;
                gap: 15px !important;
            }
            
            #user-input {
                font-size: 1.2rem !important;
                padding: 22px 26px !important;
                line-height: 1.6 !important;
                width: calc(100% - 80px) !important;
                max-width: calc(100vw - 120px) !important;
            }
            
            .input-area {
                display: flex !important;
                gap: 15px !important;
                align-items: center !important;
                width: 100% !important;
                padding: 0 10px !important;
            }
            
            .send-btn {
                width: 60px !important;
                height: 60px !important;
                font-size: 1.4rem !important;
            }
            
            .chat-container {
                min-height: 60vh !important;
                height: auto !important;
                flex: 1 !important;
            }
            
            .tab-content {
                padding: 15px !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-robot"></i> Samir - Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ</h1>
            <p>Ask questions and take quizzes! / Ø§Ø³Ø£Ù„ ÙˆØ£Ø®Ø¶Ø¹ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª!</p>
        </header>
        
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('chat')">
                <i class="fas fa-comments"></i> Chat / Ù…Ø­Ø§Ø¯Ø«Ø©
            </button>
            <button class="tab-btn" onclick="switchTab('quiz')">
                <i class="fas fa-question-circle"></i> Quiz / Ø§Ø®ØªØ¨Ø§Ø±
            </button>
        </div>

        <!-- Chat Tab -->
        <div id="chat-tab" class="tab-content active">
            <div class="chat-container">
                <div id="topic-buttons" class="topic-buttons">
                    <button class="topic-btn" onclick="sendTopicMessage('Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„ØªÙŠ ØªÙˆØ§Ø¬Ù‡ Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©')">Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„ØªÙŠ ØªÙˆØ§Ø¬Ù‡ Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©</button>
                    <button class="topic-btn" onclick="sendTopicMessage('Ø£Ù‡Ù…ÙŠØ© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±')">Ø£Ù‡Ù…ÙŠØ© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±</button>
                    <button class="topic-btn" onclick="sendTopicMessage('Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„ØªÙŠ ÙŠØ¬Ø¨ Ø§Ù„Ø¥Ù‡ØªÙ…Ø§Ù… Ø¨Ù‡Ø§')">Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„ØªÙŠ ÙŠØ¬Ø¨ Ø§Ù„Ø¥Ù‡ØªÙ…Ø§Ù… Ø¨Ù‡Ø§</button>
                    <button class="topic-btn" onclick="sendTopicMessage('Ø£Ø¶Ø±Ø§Ø± Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒ')">Ø£Ø¶Ø±Ø§Ø± Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒ</button>
                    <button class="topic-btn" onclick="sendTopicMessage('Ù…Ø§ Ù‡Ùˆ Ø³Ù…ÙŠØ±')">Ù…Ø§ Ù‡Ùˆ Ø³Ù…ÙŠØ±</button>
                    <button class="topic-btn" onclick="sendTopicMessage('ÙƒÙŠÙÙŠØ© Ø§Ø­ØªØ³Ø§Ø¨ ÙˆØ§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù†Ù‚Ø§Ø·')">ÙƒÙŠÙÙŠØ© Ø§Ø­ØªØ³Ø§Ø¨ ÙˆØ§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù†Ù‚Ø§Ø·</button>
                    <button class="topic-btn" onclick="sendTopicMessage('Ù…Ø§Ù‡ÙŠ Ø§Ù„ØªÙ†Ù…ÙŠØ© Ø§Ù„Ù…Ø³ØªØ¯Ø§Ù…Ø©')">Ù…Ø§Ù‡ÙŠ Ø§Ù„ØªÙ†Ù…ÙŠØ© Ø§Ù„Ù…Ø³ØªØ¯Ø§Ù…Ø©</button>
                    <button class="topic-btn" onclick="sendTopicMessage('Ù…Ù† Ù†Ø­Ù†')">Ù…Ù† Ù†Ø­Ù†</button>
                </div>
                <div id="messages" class="messages"></div>
                <div class="input-area">
                    <input type="text" id="user-input" placeholder="Ask me anything... / Ø§Ø³Ø£Ù„Ù†ÙŠ Ø£ÙŠ Ø´ÙŠØ¡..." onkeypress="handleKeyPress(event)">
                    <button onclick="sendMessage()" class="send-btn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Quiz Tab -->
        <div id="quiz-tab" class="tab-content">
            <div class="quiz-container">
                <div id="quiz-selection">
                    <h3>Select a Quiz</h3>
                    <div id="quiz-list" class="quiz-list"></div>
                </div>
                <div id="quiz-content" class="quiz-content" style="display: none;">
                    <div class="quiz-header">
                        <h3 id="quiz-title"></h3>
                        <div class="quiz-progress">
                            <span id="current-question">1</span> / <span id="total-questions">5</span>
                        </div>
                    </div>
                    <div id="quiz-question" class="quiz-question"></div>
                    <div id="quiz-options" class="quiz-options"></div>
                    <div class="quiz-controls">
                        <button id="prev-btn" onclick="previousQuestion()" disabled>Previous</button>
                        <button id="next-btn" onclick="nextQuestion()">Next</button>
                        <button id="submit-btn" onclick="submitQuiz()" style="display: none;">Submit Quiz</button>
                    </div>
                    <div id="quiz-results" class="quiz-results" style="display: none;"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let chatbotData = null;
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let quizScore = 0;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            loadChatbotData();
            initializeTabs();
            addWelcomeMessage();
        });

        // Load chatbot data
        function loadChatbotData() {
            chatbotData = {
                "texts": [
                    {
                        "id": "intro",
                        "title": "Welcome to the Chatbot",
                        "content": "Hello! I'm a simple chatbot that can help you with texts and quizzes. I can answer questions about various topics and generate quizzes for you to practice.",
                        "keywords": ["welcome", "hello", "help", "introduction"]
                    },
                    {
                        "id": "alex_climate_ar",
                        "title": "Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© Ø¨ÙŠÙ† Ø§Ù„ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø®ÙŠØ© ÙˆØ­Ù„ÙˆÙ„ Ø§Ù„Ø§Ø³ØªØ¯Ø§Ù…Ø©: Ù…Ø´Ø±ÙˆØ¹ Ø³Ù…ÙŠØ± Ù†Ù…ÙˆØ°Ø¬Ù‹Ø§",
                        "content": "ØªÙˆØ§Ø¬Ù‡ Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© ØªØ­Ø¯ÙŠØ§Øª Ø¨ÙŠØ¦ÙŠØ© Ø¨Ø³Ø¨Ø¨ Ø§Ø±ØªÙØ§Ø¹ Ù…Ø³ØªÙˆÙ‰ Ø³Ø·Ø­ Ø§Ù„Ø¨Ø­Ø± ÙˆØ§Ù„ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø®ÙŠØ©ØŒ Ù…Ù…Ø§ ÙŠÙ‡Ø¯Ø¯ Ù…ÙˆØ§Ù‚Ø¹ Ø£Ø«Ø±ÙŠØ© ÙˆØ«Ù‚Ø§ÙÙŠØ© Ù…Ø«Ù„ Ù‚Ù„Ø¹Ø© Ù‚Ø§ÙŠØªØ¨Ø§ÙŠ ÙˆÙ…Ù‚Ø§Ø¨Ø± Ø§Ù„Ø´Ø§Ø·Ø¨ÙŠ ÙˆØ§Ù„Ø£Ù†ÙÙˆØ´ÙŠ. ÙŠÙØ§Ù‚Ù… Ø§Ù„ØªÙ„ÙˆØ« Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠ Ø§Ù„ÙˆØ¶Ø¹ Ø¹Ø¨Ø± Ø§Ù„Ù…ÙŠÙƒØ±ÙˆØ¨Ù„Ø§Ø³ØªÙŠÙƒ ÙˆØªØ£Ø«ÙŠØ±Ø§ØªÙ‡ Ø§Ù„Ø¨ÙŠØ¦ÙŠØ© ÙˆØ§Ù„ØµØ­ÙŠØ©. ÙŠÙ‚Ø¯Ù… Ù…Ø´Ø±ÙˆØ¹ Ø³Ù…ÙŠØ± Ø­Ù„ÙˆÙ„Ù‹Ø§ Ø¹Ù…Ù„ÙŠØ©: Ø®Ø±ÙŠØ·Ø© ØªÙØ§Ø¹Ù„ÙŠØ© Ù„Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù…Ø¹Ø±Ø¶Ø© Ù„Ù„ÙÙŠØ¶Ø§Ù†Ø§ØªØŒ Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù„Ù„ØªÙˆØ¹ÙŠØ© ÙˆÙ†ØµØ§Ø¦Ø­ Ø§Ù„Ø§Ø³ØªØ¯Ø§Ù…Ø©ØŒ ÙˆØ¢Ù„ÙŠØ© Ù†Ù‚Ø§Ø· Ù„ØªØ­ÙÙŠØ² Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ± Ø¹Ø¨Ø± QR ÙˆØ±Ø¨Ø·Ù‡Ø§ Ø¨Ø´Ø±ÙƒØ§Øª Ù…Ø¹ØªÙ…Ø¯Ø©. ÙŠÙ‡Ø¯Ù Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù„ØªØ¹Ø²ÙŠØ² Ø§Ù„ÙˆØ¹ÙŠØŒ Ø¥Ø´Ø±Ø§Ùƒ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ ÙˆØ§Ù„Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø®Ø§ØµØŒ ÙˆØ¯Ø¹Ù… Ø§Ù„Ø³ÙŠØ§Ø­Ø© Ø§Ù„Ø¨ÙŠØ¦ÙŠØ© ÙˆØ­Ù…Ø§ÙŠØ© Ø§Ù„ØªØ±Ø§Ø«ØŒ Ù…Ø¹ Ù‚Ø§Ø¨Ù„ÙŠØ© Ø§Ù„ØªÙˆØ³Ø¹ Ù„Ù…Ø¯Ù† Ø³Ø§Ø­Ù„ÙŠØ© Ø£Ø®Ø±Ù‰.",
                        "keywords": ["Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©", "Ø§Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©", "ØªØºÙŠØ±Ø§Øª Ù…Ù†Ø§Ø®ÙŠØ©", "Ø§Ù„Ø§Ø³ØªØ¯Ø§Ù…Ø©", "Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒ", "Ø§Ù„Ù…ÙŠÙƒØ±ÙˆØ¨Ù„Ø§Ø³ØªÙŠÙƒ", "Ù‚Ù„Ø¹Ø© Ù‚Ø§ÙŠØªØ¨Ø§ÙŠ", "Ù…Ø´Ø±ÙˆØ¹ Ø³Ù…ÙŠØ±", "Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±", "ÙÙŠØ¶Ø§Ù†Ø§Øª", "Ø®Ø±ÙŠØ·Ø© ØªÙØ§Ø¹Ù„ÙŠØ©"]
                    }
                ],
                "quizzes": [
                    {
                        "id": "math_quiz_1",
                        "title": "Basic Math Quiz",
                        "questions": [
                            {
                                "id": 1,
                                "question": "What is 5 + 3?",
                                "options": ["6", "7", "8", "9"],
                                "correct": 2,
                                "explanation": "5 + 3 = 8"
                            },
                            {
                                "id": 2,
                                "question": "What is 12 - 4?",
                                "options": ["6", "7", "8", "9"],
                                "correct": 2,
                                "explanation": "12 - 4 = 8"
                            },
                            {
                                "id": 3,
                                "question": "What is 3 Ã— 4?",
                                "options": ["10", "11", "12", "13"],
                                "correct": 2,
                                "explanation": "3 Ã— 4 = 12"
                            }
                        ]
                    },
                    {
                        "id": "alex_quiz_ar",
                        "title": "Ø§Ø®ØªØ¨Ø§Ø±: Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© ÙˆØ§Ù„Ù…Ù†Ø§Ø® ÙˆØ§Ù„Ø§Ø³ØªØ¯Ø§Ù…Ø©",
                        "questions": [
                            {
                                "id": 1,
                                "question": "Ù…Ø§ Ø§Ù„Ø®Ø·Ø± Ø§Ù„Ù…Ù†Ø§Ø®ÙŠ Ø§Ù„Ø£Ø¨Ø±Ø² Ø§Ù„Ø°ÙŠ ÙŠÙ‡Ø¯Ø¯ Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©ØŸ",
                                "options": ["Ø§Ù„Ø²Ù„Ø§Ø²Ù„", "Ø§Ø±ØªÙØ§Ø¹ Ù…Ø³ØªÙˆÙ‰ Ø³Ø·Ø­ Ø§Ù„Ø¨Ø­Ø±", "Ø§Ù„Ø¹ÙˆØ§ØµÙ Ø§Ù„Ø±Ù…Ù„ÙŠØ©", "Ø§Ù„Ø¬ÙØ§Ù ÙÙ‚Ø·"],
                                "correct": 1,
                                "explanation": "ØªØ´ÙŠØ± Ø§Ù„Ø¯Ø±Ø§Ø³Ø§Øª Ø¥Ù„Ù‰ Ø£Ù† Ø§Ø±ØªÙØ§Ø¹ Ù…Ø³ØªÙˆÙ‰ Ø³Ø·Ø­ Ø§Ù„Ø¨Ø­Ø± Ù‚Ø¯ ÙŠØ¤Ø¯ÙŠ Ù„ÙÙ‚Ø¯Ø§Ù† Ø£Ø¬Ø²Ø§Ø¡ Ù…Ù† Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©."
                            },
                            {
                                "id": 2,
                                "question": "Ø£ÙŠ Ù…Ù† Ø§Ù„Ù…Ø¹Ø§Ù„Ù… Ø§Ù„ØªØ§Ù„ÙŠØ© Ø¶Ù…Ù† Ù†Ø·Ø§Ù‚ Ø§Ù„Ø®Ø·Ø±ØŸ",
                                "options": ["Ø§Ù„Ø£Ù‡Ø±Ø§Ù…Ø§Øª", "Ù‚Ù„Ø¹Ø© Ù‚Ø§ÙŠØªØ¨Ø§ÙŠ", "Ø³Ø¯ Ø§Ù„Ø¹Ø§Ù„ÙŠ", "Ù…Ø¹Ø¨Ø¯ Ø§Ù„ÙƒØ±Ù†Ùƒ"],
                                "correct": 1,
                                "explanation": "Ù‚Ù„Ø¹Ø© Ù‚Ø§ÙŠØªØ¨Ø§ÙŠ Ù…Ø¹Ø±Ù‘Ø¶Ø© Ù„ÙÙ‚Ø¯Ø§Ù† Ù†Ø³Ø¨Ø© Ù…Ù† Ù…Ø³Ø§Ø­ØªÙ‡Ø§ ÙˆÙÙ‚ Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ù…Ù†Ø§Ø®ÙŠØ©."
                            },
                            {
                                "id": 3,
                                "question": "Ù…Ø§ Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒ ÙÙŠ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¨Ø­Ø±ÙŠØ©ØŸ",
                                "options": ["ÙŠØªØ­Ù„Ù„ Ø®Ù„Ø§Ù„ Ø£ÙŠØ§Ù…", "ÙŠØªØ­ÙˆÙ„ Ø¥Ù„Ù‰ Ù…ÙŠÙƒØ±ÙˆØ¨Ù„Ø§Ø³ØªÙŠÙƒ ÙŠØ¯Ø®Ù„ Ø§Ù„Ø³Ù„Ø³Ù„Ø© Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ©", "ÙŠÙ†Ø¸Ù Ø§Ù„Ù…ÙŠØ§Ù‡", "ÙŠØ²ÙŠØ¯ Ø§Ù„Ø£ÙƒØ³Ø¬ÙŠÙ†"],
                                "correct": 1,
                                "explanation": "Ø§Ù„Ù…ÙŠÙƒØ±ÙˆØ¨Ù„Ø§Ø³ØªÙŠÙƒ ÙŠØ¯Ø®Ù„ ÙÙŠ Ø§Ù„Ø³Ù„Ø³Ù„Ø© Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© ÙˆÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†Ø³Ø§Ù†."
                            }
                        ]
                    }
                ],
                "responses": {
                    "greetings": [
                        "Hello! How can I help you today?",
                        "Ù…Ø±Ø­Ø¨Ù‹Ø§! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ",
                        "Ø£Ù‡Ù„Ù‹Ø§ Ø¨Ùƒ! Ù…Ø§Ø°Ø§ ØªØ­Ø¨ Ø£Ù† ØªØªØ¹Ù„Ù…ØŸ"
                    ],
                    "help": [
                        "I can help you with texts and quizzes. Try asking about a topic or request a quiz!",
                        "Ø£Ø³ØªØ·ÙŠØ¹ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø§Ù„Ù†ØµÙˆØµ ÙˆØ§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª. Ø§Ø³Ø£Ù„ Ø¹Ù† Ù…ÙˆØ¶ÙˆØ¹ Ø£Ùˆ Ø§Ø·Ù„Ø¨ Ø§Ø®ØªØ¨Ø§Ø±Ù‹Ø§!"
                    ],
                    "unknown": [
                        "I'm not sure about that. Can you try asking about a specific topic or request a quiz?",
                        "Ù„Ø³Øª Ù…ØªØ£ÙƒØ¯Ù‹Ø§ Ù…Ù† Ø°Ù„Ùƒ. Ø¬Ø±Ù‘Ø¨ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¹Ù† Ù…ÙˆØ¶ÙˆØ¹ Ù…Ø­Ø¯Ø¯ Ø£Ùˆ Ø§Ø·Ù„Ø¨ Ø§Ø®ØªØ¨Ø§Ø±Ù‹Ø§."
                    ]
                }
            };
            loadQuizzes();
        }

        // Tab switching functionality
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabName + '-tab').classList.add('active');
            document.querySelectorAll('.tab-btn').forEach(btn => {
                const attr = btn.getAttribute('onclick') || '';
                if (attr.includes("'" + tabName + "'")) {
                    btn.classList.add('active');
                }
            });
        }

        // Initialize tabs
        function initializeTabs() {
            const tabButtons = document.querySelectorAll('.tab-btn');
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const match = (this.getAttribute('onclick') || '').match(/'([^']+)'/);
                    const tabName = match ? match[1] : 'chat';
                    switchTab(tabName);
                });
            });
        }

        // Add welcome message
        function addWelcomeMessage() {
            setTimeout(() => {
                appendMessage('bot', 'Ù…Ø±Ø­Ø¨Ù‹Ø§! Ø£Ù†Ø§ Ø³Ù…ÙŠØ±ØŒ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ Ù„Ù„ØªÙˆØ¹ÙŠØ© Ø¨Ø§Ù„Ù…Ù†Ø§Ø® ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±. ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ ÙÙ‡Ù… Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„ØªÙŠ ØªÙˆØ§Ø¬Ù‡ Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© ÙˆØ­Ù„ÙˆÙ„ Ø§Ù„Ø§Ø³ØªØ¯Ø§Ù…Ø©. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø£Ø¯Ù†Ø§Ù‡ Ø£Ùˆ Ø§Ø³Ø£Ù„Ù†ÙŠ Ù…Ø¨Ø§Ø´Ø±Ø©!');
            }, 500);
        }

        // Chat functionality
        function appendMessage(sender, text) {
            const messagesDiv = document.getElementById('messages');
            const div = document.createElement('div');
            div.classList.add('message', sender);
            div.textContent = text;
            messagesDiv.appendChild(div);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function sendMessage() {
            const userInput = document.getElementById('user-input');
            const msg = userInput.value.trim();
            if (!msg) return;
            
            appendMessage('user', msg);
            userInput.value = '';
            
            const response = processMessage(msg);
            setTimeout(() => {
                appendMessage('bot', response);
            }, 500);
        }

        function sendTopicMessage(topic) {
            // Clear previous messages
            const messagesDiv = document.getElementById('messages');
            messagesDiv.innerHTML = '';
            
            // Add the new topic message
            appendMessage('user', topic);
            const response = processMessage(topic);
            setTimeout(() => {
                appendMessage('bot', response);
            }, 500);
        }

        function processMessage(message) {
            if (!chatbotData) return 'I\'m still loading my knowledge base. Please wait a moment.';
            
            const lowerMessage = message.toLowerCase();
            const isArabic = /[\u0600-\u06FF]/.test(message);
            
            // Check for keyword-based responses
            if (lowerMessage.includes('Ø§Ù„Ø§Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©') || lowerMessage.includes('Ø§Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©') || lowerMessage.includes('Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©')) {
                return 'Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© Ù‡ÙŠ Ù…Ø¯ÙŠÙ†Ø© Ù…ØµØ±ÙŠØ© Ø³Ø§Ø­Ù„ÙŠØ© Ù…Ù‡Ø¯Ø¯Ø© Ø¨ÙŠØ¦ÙŠØ§Ù‹ Ø¨Ø³Ø¨Ø¨ Ù…Ø®Ø§Ø·Ø± Ø§Ø±ØªÙØ§Ø¹ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¨Ø­Ø± ÙˆØ§Ù„ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø®ÙŠØ© Ø§Ù„Ù†Ø§Ø¬Ù…Ø© Ø¹Ù† ØªÙ„ÙˆØ« Ø§Ù„Ø¨ÙŠØ¦Ø©. ØªÙˆØ§Ø¬Ù‡ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© ØªØ­Ø¯ÙŠØ§Øª ÙƒØ¨ÙŠØ±Ø© ØªØ´Ù…Ù„:\n\nâ€¢ Ø§Ø±ØªÙØ§Ø¹ Ù…Ø³ØªÙˆÙ‰ Ø³Ø·Ø­ Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø°ÙŠ Ù‚Ø¯ ÙŠØ¤Ø¯ÙŠ Ù„ÙÙ‚Ø¯Ø§Ù† Ø£Ø¬Ø²Ø§Ø¡ ÙˆØ§Ø³Ø¹Ø© Ù…Ù† Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©\nâ€¢ Ø§Ù„ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù…Ù†Ø§Ø®ÙŠØ© Ø§Ù„ØªÙŠ ØªÙ‡Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø£Ø«Ø±ÙŠØ© ÙˆØ§Ù„Ø«Ù‚Ø§ÙÙŠØ©\nâ€¢ Ø§Ù„ØªÙ„ÙˆØ« Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠ Ø§Ù„Ø°ÙŠ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¨Ø­Ø±ÙŠØ© ÙˆØ§Ù„ØµØ­Ø© Ø§Ù„Ø¹Ø§Ù…Ø©\nâ€¢ Ø§Ù„Ù…Ø¹Ø§Ù„Ù… Ø§Ù„Ù…Ù‡Ø¯Ø¯Ø© Ù…Ø«Ù„ Ù‚Ù„Ø¹Ø© Ù‚Ø§ÙŠØªØ¨Ø§ÙŠ ÙˆÙ…Ù‚Ø§Ø¨Ø± Ø§Ù„Ø´Ø§Ø·Ø¨ÙŠ ÙˆØ§Ù„Ø£Ù†ÙÙˆØ´ÙŠ\n\nÙ‡Ø°Ù‡ Ø§Ù„Ù…Ø®Ø§Ø·Ø± ØªØªØ·Ù„Ø¨ Ø­Ù„ÙˆÙ„Ø§Ù‹ Ø´Ø§Ù…Ù„Ø© ÙˆÙ…Ø³ØªØ¯Ø§Ù…Ø© Ù„Ø­Ù…Ø§ÙŠØ© ØªØ±Ø§Ø«Ù†Ø§ ÙˆØ¨ÙŠØ¦ØªÙ†Ø§.';
            }
            
            if (lowerMessage.includes('Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±') || lowerMessage.includes('ØªØ¯ÙˆÙŠØ±') || lowerMessage.includes('Ø¥Ø¹Ø§Ø¯Ø© ØªØ¯ÙˆÙŠØ±')) {
                return 'Ø£Ù‡Ù…ÙŠØ© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±:\n\nâ€¢ Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¨ÙŠØ¦Ø©: ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù†ÙØ§ÙŠØ§Øª ÙˆØ§Ù„ØªÙ„ÙˆØ«\nâ€¢ ØªÙˆÙÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø±Ø¯: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆØ§Ø¯ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…ÙˆØ§Ø¯ Ø¬Ø¯ÙŠØ¯Ø©\nâ€¢ Ø¯Ø¹Ù… Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯: Ø®Ù„Ù‚ ÙØ±Øµ Ø¹Ù…Ù„ ÙÙŠ ØµÙ†Ø§Ø¹Ø© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±\nâ€¢ Ø­Ù…Ø§ÙŠØ© Ø§Ù„ØµØ­Ø©: ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„ØµØ­ÙŠØ© Ù…Ù† Ø§Ù„ØªÙ„ÙˆØ« Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠ\nâ€¢ Ø§Ù„Ø§Ø³ØªØ¯Ø§Ù…Ø©: Ø¶Ù…Ø§Ù† Ù…ÙˆØ§Ø±Ø¯ Ù„Ù„Ø£Ø¬ÙŠØ§Ù„ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©\n\nÙ…Ø´Ø±ÙˆØ¹ Ø³Ù…ÙŠØ± ÙŠØ­ÙØ² Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ± Ø¹Ø¨Ø± Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø°ÙŠ ÙŠØ±Ø¨Ø· Ø§Ù„Ø£Ø³Ø± Ø¨Ø´Ø±ÙƒØ§Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ± Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©.';
            }
            
            if (lowerMessage.includes('Ø§Ù„Ù…Ù†Ø§Ø·Ù‚') || lowerMessage.includes('Ù…Ù†Ø·Ù‚Ø©') || lowerMessage.includes('Ø§Ù‡ØªÙ…Ø§Ù…') || lowerMessage.includes('Ø§Ù‡ØªÙ…Ø§Ù…')) {
                return 'Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬ Ø§Ù‡ØªÙ…Ø§Ù… Ø®Ø§Øµ:\n\nâ€¢ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø³Ø§Ø­Ù„ÙŠØ©: Ø§Ù„Ø£ÙƒØ«Ø± Ø¹Ø±Ø¶Ø© Ù„Ø§Ø±ØªÙØ§Ø¹ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¨Ø­Ø±\nâ€¢ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø£Ø«Ø±ÙŠØ©: Ù‚Ù„Ø¹Ø© Ù‚Ø§ÙŠØªØ¨Ø§ÙŠØŒ Ù…Ù‚Ø§Ø¨Ø± Ø§Ù„Ø´Ø§Ø·Ø¨ÙŠ ÙˆØ§Ù„Ø£Ù†ÙÙˆØ´ÙŠ\nâ€¢ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ©: Ù…ØµØ§Ø¯Ø± Ø§Ù„ØªÙ„ÙˆØ« Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠ\nâ€¢ Ø§Ù„Ø£Ø­ÙŠØ§Ø¡ Ø§Ù„Ø³ÙƒÙ†ÙŠØ©: Ù„ØªØ¹Ø²ÙŠØ² Ø§Ù„ÙˆØ¹ÙŠ ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ÙŠØ©\nâ€¢ Ø§Ù„Ù…ÙˆØ§Ù†Ø¦ ÙˆØ§Ù„Ù…Ø±Ø§ÙØ¦: Ù†Ù‚Ø§Ø· ØªØ¬Ù…Ø¹ Ø§Ù„Ù†ÙØ§ÙŠØ§Øª Ø§Ù„Ø¨Ø­Ø±ÙŠØ©\n\nØ§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© ÙÙŠ Ù…Ø´Ø±ÙˆØ¹ Ø³Ù…ÙŠØ± ØªØ¨Ø±Ø² Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø¨Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ù„ØªØ³Ù‡ÙŠÙ„ ÙÙ‡Ù… Ø§Ù„Ù…Ø®Ø§Ø·Ø±.';
            }
            
            if (lowerMessage.includes('Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒ') || lowerMessage.includes('Ø¨Ù„Ø§Ø³ØªÙŠÙƒ') || lowerMessage.includes('Ø£Ø¶Ø±Ø§Ø±') || lowerMessage.includes('Ø¶Ø±Ø±')) {
                return 'Ø£Ø¶Ø±Ø§Ø± Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ¦Ø© ÙˆØ§Ù„ØµØ­Ø©:\n\nØ§Ù„Ø¨ÙŠØ¦Ø©:\nâ€¢ Ù„Ø§ ÙŠØªØ­Ù„Ù„ Ø¨Ø³Ù‡ÙˆÙ„Ø©ØŒ ÙŠØªØ­ÙˆÙ„ Ù„Ù…ÙŠÙƒØ±ÙˆØ¨Ù„Ø§Ø³ØªÙŠÙƒ\nâ€¢ ÙŠØ¯Ø®Ù„ ÙÙŠ Ø§Ù„ØªØ±Ø¨Ø© ÙˆØ§Ù„Ø£Ù†Ù‡Ø§Ø± ÙˆØ§Ù„Ø¨Ø­Ø§Ø±\nâ€¢ ÙŠØ¶Ø± Ø¨Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨ÙŠØ¦ÙŠ ÙˆØ§Ù„ÙƒØ§Ø¦Ù†Ø§Øª Ø§Ù„Ø¨Ø­Ø±ÙŠØ©\n\nØ§Ù„ØµØ­Ø©:\nâ€¢ ÙŠØ²ÙŠØ¯ Ù…Ø¹Ø¯Ù„Ø§Øª Ø§Ù„Ø³Ø±Ø·Ø§Ù† Ø®Ø§ØµØ© ÙÙŠ Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ù‡Ø¶Ù…ÙŠ ÙˆØ§Ù„ÙƒØ¨Ø¯\nâ€¢ ÙŠØ³Ø¨Ø¨ Ù…Ø´Ø§ÙƒÙ„ Ø±Ø¦ÙˆÙŠØ© Ù…Ø«Ù„ Ø§Ù„Ø§Ù„ØªÙ‡Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø²Ù…Ù†Ø© ÙˆØ§Ù„Ø±Ø¨Ùˆ\nâ€¢ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ø¹ØµØ¨ÙŠ Ù„Ù„Ø£Ø·ÙØ§Ù„\nâ€¢ ÙŠØ¹Ø²Ø² ØªØ±Ø§ÙƒÙ… Ø§Ù„Ø¨ÙƒØªÙŠØ±ÙŠØ§ ÙÙŠ Ø§Ù„Ø²Ø¬Ø§Ø¬Ø§Øª Ø§Ù„Ù…Ø¹Ø§Ø¯ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§\n\nÙ„Ø°Ù„Ùƒ Ù†Ø­ØªØ§Ø¬ Ù„Ø­Ù„ÙˆÙ„ Ø¢Ù…Ù†Ø© Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±.';
            }
            
            if (lowerMessage.includes('Ø³Ù…ÙŠØ±') || lowerMessage.includes('Ù…Ø´Ø±ÙˆØ¹ Ø³Ù…ÙŠØ±')) {
                return 'Ø³Ù…ÙŠØ± Ù‡Ùˆ Ù…Ø´Ø±ÙˆØ¹ Ø°ÙƒÙŠ Ù„Ù„ØªÙˆØ¹ÙŠØ© Ø¨Ø§Ù„Ù…Ù†Ø§Ø® ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±:\n\nØ§Ù„Ø£Ø¯ÙˆØ§Øª:\nâ€¢ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©: ØªØ¸Ù‡Ø± Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù…Ø¹Ø±Ø¶Ø© Ù„Ù„ÙÙŠØ¶Ø§Ù†Ø§Øª\nâ€¢ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ: ÙŠØ¬ÙŠØ¨ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆÙŠÙ‚Ø¯Ù… Ù†ØµØ§Ø¦Ø­ Ø¹Ù…Ù„ÙŠØ©\nâ€¢ Ø¢Ù„Ø© Ø§Ù„Ù†Ù‚Ø§Ø·: ØªØ­ÙˆÙ„ Ø§Ù„Ø²Ø¬Ø§Ø¬Ø§Øª Ø§Ù„ÙØ§Ø±ØºØ© Ù„Ù†Ù‚Ø§Ø· Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„\n\nØ§Ù„Ø£Ù‡Ø¯Ø§Ù:\nâ€¢ Ø±Ø¨Ø· Ø§Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø¨Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø´Ø¹Ø¨ÙŠ\nâ€¢ ØªØ­ÙÙŠØ² Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ÙŠØ©\nâ€¢ Ø¯Ø¹Ù… Ø§Ù„Ø³ÙŠØ§Ø­Ø© Ø§Ù„Ø¨ÙŠØ¦ÙŠØ©\nâ€¢ Ø­Ù…Ø§ÙŠØ© Ø§Ù„ØªØ±Ø§Ø« Ù…Ù† Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ù…Ù†Ø§Ø®ÙŠØ©\n\nØ³Ù…ÙŠØ± ÙŠÙ‡Ø¯Ù Ù„Ø¬Ø¹Ù„ Ù…ØµØ± Ù†Ù…ÙˆØ°Ø¬Ø§Ù‹ Ø±Ø§Ø¦Ø¯Ø§Ù‹ ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ù„Ù„Ø§Ø³ØªØ¯Ø§Ù…Ø©.';
            }
            
            if (lowerMessage.includes('Ø§Ù„Ù†Ù‚Ø§Ø·') || lowerMessage.includes('Ù†Ù‚Ø§Ø·') || lowerMessage.includes('Ø§Ø³ØªØ¨Ø¯Ø§Ù„') || lowerMessage.includes('Ø§Ø­ØªØ³Ø§Ø¨')) {
                return 'Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø· ÙÙŠ Ù…Ø´Ø±ÙˆØ¹ Ø³Ù…ÙŠØ±:\n\nÙƒÙŠÙÙŠØ© Ø§Ù„Ø¹Ù…Ù„:\nâ€¢ Ø¶Ø¹ Ø§Ù„Ø²Ø¬Ø§Ø¬Ø© Ø§Ù„ÙØ§Ø±ØºØ© ÙÙŠ Ø¢Ù„Ø© Ø§Ù„Ù†Ù‚Ø§Ø·\nâ€¢ Ø§Ù…Ø³Ø­ QR Code Ø§Ù„Ù…Ø·Ø¨ÙˆØ¹ Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø¬Ø§Ø¬Ø©\nâ€¢ Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù†Ù‚Ø§Ø· Ø­Ø³Ø¨ Ù†ÙˆØ¹ ÙˆØ­Ø¬Ù… Ø§Ù„Ø²Ø¬Ø§Ø¬Ø©\nâ€¢ Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ù†Ù‚Ø§Ø· ÙÙŠ Ø§Ù„Ø³ÙˆØ¨Ø±Ù…Ø§Ø±ÙƒØª ÙˆØ§Ù„Ù…ÙˆÙ„Ø§Øª\n\nØ§Ù„ÙÙˆØ§Ø¦Ø¯:\nâ€¢ ØªØ­ÙÙŠØ² Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±\nâ€¢ Ø±Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ø¨Ø´Ø±ÙƒØ§Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ± Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©\nâ€¢ Ø¶Ù…Ø§Ù† Ø¥Ø¹Ø§Ø¯Ø© ØªØ¯ÙˆÙŠØ± Ø¢Ù…Ù†Ø© ÙˆØµØ­ÙŠØ©\nâ€¢ Ø¯Ø¹Ù… Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ Ø§Ù„Ù…Ø­Ù„ÙŠ\n\nØ§Ù„Ù†Ù‚Ø§Ø· Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø¨Ù…Ù†ØªØ¬Ø§Øª Ø£Ùˆ Ø®ØµÙˆÙ…Ø§Øª ÙÙŠ Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©.';
            }
            
            if (lowerMessage.includes('Ø§Ù„ØªÙ†Ù…ÙŠØ© Ø§Ù„Ù…Ø³ØªØ¯Ø§Ù…Ø©') || lowerMessage.includes('Ù…Ø³ØªØ¯Ø§Ù…Ø©') || lowerMessage.includes('Ø§Ø³ØªØ¯Ø§Ù…Ø©')) {
                return 'Ø§Ù„ØªÙ†Ù…ÙŠØ© Ø§Ù„Ù…Ø³ØªØ¯Ø§Ù…Ø©:\n\nØ§Ù„ØªØ¹Ø±ÙŠÙ:\nØ§Ù„ØªÙ†Ù…ÙŠØ© Ø§Ù„ØªÙŠ ØªÙ„Ø¨ÙŠ Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø­Ø§Ø¶Ø± Ø¯ÙˆÙ† Ø§Ù„Ù…Ø³Ø§Ø³ Ø¨Ù‚Ø¯Ø±Ø© Ø§Ù„Ø£Ø¬ÙŠØ§Ù„ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© Ø¹Ù„Ù‰ ØªÙ„Ø¨ÙŠØ© Ø§Ø­ØªÙŠØ§Ø¬Ø§ØªÙ‡Ø§.\n\nØ§Ù„Ø£Ø¨Ø¹Ø§Ø¯:\nâ€¢ Ø§Ù„Ø¨ÙŠØ¦ÙŠ: Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© ÙˆØ§Ù„ØªÙ†ÙˆØ¹ Ø§Ù„Ø¨ÙŠÙˆÙ„ÙˆØ¬ÙŠ\nâ€¢ Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠ: Ù†Ù…Ùˆ Ø§Ù‚ØªØµØ§Ø¯ÙŠ Ø¹Ø§Ø¯Ù„ ÙˆÙ…Ø³ØªØ¯Ø§Ù…\nâ€¢ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ: Ø¹Ø¯Ø§Ù„Ø© Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© ÙˆØ±ÙØ§Ù‡ÙŠØ© Ø§Ù„Ø¥Ù†Ø³Ø§Ù†\n\nÙÙŠ Ù…Ø´Ø±ÙˆØ¹ Ø³Ù…ÙŠØ±:\nâ€¢ Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¨ÙŠØ¦Ø© Ù…Ù† Ø§Ù„ØªÙ„ÙˆØ« Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠ\nâ€¢ Ø¯Ø¹Ù… Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ Ø¹Ø¨Ø± ØµÙ†Ø§Ø¹Ø© Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±\nâ€¢ ØªØ¹Ø²ÙŠØ² Ø§Ù„ÙˆØ¹ÙŠ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ÙŠ ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙƒØ©\nâ€¢ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„ØªØ±Ø§Ø« Ø§Ù„Ø«Ù‚Ø§ÙÙŠ\n\nØ§Ù„Ù‡Ø¯Ù: Ø¬Ø¹Ù„ Ù…ØµØ± Ù†Ù…ÙˆØ°Ø¬Ø§Ù‹ Ø±Ø§Ø¦Ø¯Ø§Ù‹ ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©.';
            }
            
            if (lowerMessage.includes('Ù…Ù† Ù†Ø­Ù†') || lowerMessage.includes('ÙØ±ÙŠÙ‚') || lowerMessage.includes('Ù†Ø­Ù†')) {
                return 'Ù…Ù† Ù†Ø­Ù†:\n\nÙ†Ø­Ù† ÙØ±ÙŠÙ‚ Ù…Ø®ØµØµ Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© ÙˆØªØ±Ø§Ø«Ù‡Ø§ Ù…Ù† Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ù…Ù†Ø§Ø®ÙŠØ© ÙˆØ§Ù„Ø¨ÙŠØ¦ÙŠØ©.\n\nØ±Ø¤ÙŠØªÙ†Ø§:\nØ¬Ø¹Ù„ Ù…ØµØ± Ù†Ù…ÙˆØ°Ø¬Ø§Ù‹ Ø±Ø§Ø¦Ø¯Ø§Ù‹ ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ù„Ù„Ø§Ø³ØªØ¯Ø§Ù…Ø© ÙˆØ­Ù…Ø§ÙŠØ© Ø§Ù„ØªØ±Ø§Ø«.\n\nÙ…Ù‡Ù…ØªÙ†Ø§:\nâ€¢ Ø±Ø¨Ø· Ø§Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© Ø¨Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø´Ø¹Ø¨ÙŠ\nâ€¢ ØªØ·ÙˆÙŠØ± Ø­Ù„ÙˆÙ„ Ø¹Ù…Ù„ÙŠØ© Ù„Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ø¨ÙŠØ¦ÙŠØ©\nâ€¢ ØªØ¹Ø²ÙŠØ² Ø§Ù„ÙˆØ¹ÙŠ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ÙŠ\nâ€¢ Ø¯Ø¹Ù… Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ Ø§Ù„Ø£Ø®Ø¶Ø±\n\nÙ…Ø´Ø±ÙˆØ¹ Ø³Ù…ÙŠØ±:\nÙ‡Ùˆ Ø£Ø¯Ø§Ø© Ø°ÙƒÙŠØ© ØªØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ ÙˆØ§Ù„Ø¨ÙŠØ¦Ø© ÙˆØ§Ù„ØªØ±Ø§Ø« Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ ÙˆØ¶Ù…Ø§Ù† Ù…Ø³ØªÙ‚Ø¨Ù„ Ù…Ø³ØªØ¯Ø§Ù….\n\nÙ†Ø¤Ù…Ù† Ø£Ù† Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ø¨Ø³ÙŠØ·Ø© ÙˆØ§Ù„Ø°ÙƒÙŠØ© ÙŠÙ…ÙƒÙ† Ø£Ù† ØªØ­Ø¯Ø« ÙØ±Ù‚Ø§Ù‹ ÙƒØ¨ÙŠØ±Ø§Ù‹.';
            }
            
            // Check for greetings
            if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || lowerMessage.includes('hey') || (isArabic && (lowerMessage.includes('Ù…Ø±Ø­Ø¨Ø§') || lowerMessage.includes('Ù…Ø±Ø­Ø¨Ù‹Ø§') || lowerMessage.includes('Ø§Ù‡Ù„Ø§') || lowerMessage.includes('Ø£Ù‡Ù„Ø§')))) {
                return getRandomResponse(chatbotData.responses.greetings);
            }
            
            // Check for help requests
            if (lowerMessage.includes('help') || lowerMessage.includes('what can you do') || (isArabic && (lowerMessage.includes('Ù…Ø³Ø§Ø¹Ø¯Ø©') || lowerMessage.includes('ØªØ³Ø§Ø¹Ø¯Ù†ÙŠ') || lowerMessage.includes('Ù…Ø§Ø°Ø§ ØªÙØ¹Ù„') || lowerMessage.includes('ÙƒÙŠÙ ØªØ¹Ù…Ù„')))) {
                return getRandomResponse(chatbotData.responses.help);
            }
            
            // Check for quiz requests
            if (lowerMessage.includes('quiz') || lowerMessage.includes('test') || (isArabic && (lowerMessage.includes('Ø§Ø®ØªØ¨Ø§Ø±') || lowerMessage.includes('Ø§Ù…ØªØ­Ø§Ù†') || lowerMessage.includes('ÙƒÙˆÙŠØ²')))) {
                return 'ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª! Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ ØªØ¨ÙˆÙŠØ¨ Quiz Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©. ÙŠÙ…ÙƒÙ†Ùƒ Ø®ÙˆØ¶ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø­ÙˆÙ„ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø£Ùˆ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø£Ùˆ Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© ÙˆØ§Ù„Ù…Ù†Ø§Ø®.';
            }
            
            // Search for relevant text content
            for (const text of chatbotData.texts) {
                for (const keyword of text.keywords) {
                    if (lowerMessage.includes(keyword)) {
                        return `Ø¥Ù„ÙŠÙƒ Ù…Ø§ Ø£Ø¹Ø±ÙÙ‡ Ø¹Ù† ${text.title}:\n\n${text.content}`;
                    }
                }
            }
            
            // Default response
            return getRandomResponse(chatbotData.responses.unknown);
        }

        function getRandomResponse(responses) {
            return responses[Math.floor(Math.random() * responses.length)];
        }

        // Quiz functionality
        function loadQuizzes() {
            if (!chatbotData) return;
            
            const quizList = document.getElementById('quiz-list');
            quizList.innerHTML = '';
            
            chatbotData.quizzes.forEach(quiz => {
                const quizItem = document.createElement('div');
                quizItem.className = 'quiz-item';
                quizItem.innerHTML = `<h4>${quiz.title}</h4><p>${quiz.questions.length} questions</p>`;
                quizItem.onclick = () => startQuiz(quiz);
                quizList.appendChild(quizItem);
            });
        }

        function startQuiz(quiz) {
            currentQuiz = quiz;
            currentQuestionIndex = 0;
            userAnswers = [];
            quizScore = 0;
            
            document.getElementById('quiz-selection').style.display = 'none';
            document.getElementById('quiz-content').style.display = 'block';
            
            document.getElementById('quiz-title').textContent = quiz.title;
            document.getElementById('total-questions').textContent = quiz.questions.length;
            
            showQuestion();
        }

        function showQuestion() {
            const question = currentQuiz.questions[currentQuestionIndex];
            
            document.getElementById('current-question').textContent = currentQuestionIndex + 1;
            document.getElementById('quiz-question').textContent = question.question;
            
            const optionsDiv = document.getElementById('quiz-options');
            optionsDiv.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionButton = document.createElement('button');
                optionButton.className = 'option';
                optionButton.textContent = option;
                optionButton.onclick = () => selectOption(index);
                optionsDiv.appendChild(optionButton);
            });
            
            document.getElementById('prev-btn').disabled = currentQuestionIndex === 0;
            document.getElementById('next-btn').style.display = currentQuestionIndex < currentQuiz.questions.length - 1 ? 'inline-block' : 'none';
            document.getElementById('submit-btn').style.display = currentQuestionIndex === currentQuiz.questions.length - 1 ? 'inline-block' : 'none';
        }

        function selectOption(optionIndex) {
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
            });
            
            const selectedOption = document.querySelectorAll('.option')[optionIndex];
            selectedOption.classList.add('selected');
            
            const question = currentQuiz.questions[currentQuestionIndex];
            const isCorrect = optionIndex === question.correct;
            
            if (isCorrect) {
                selectedOption.classList.add('correct');
            } else {
                selectedOption.classList.add('incorrect');
                document.querySelectorAll('.option')[question.correct].classList.add('correct');
            }
            
            userAnswers[currentQuestionIndex] = optionIndex;
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentQuiz.questions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            }
        }

        function submitQuiz() {
            let correctAnswers = 0;
            currentQuiz.questions.forEach((question, index) => {
                if (userAnswers[index] === question.correct) {
                    correctAnswers++;
                }
            });
            
            quizScore = Math.round((correctAnswers / currentQuiz.questions.length) * 100);
            
            // --- Save quiz score to localStorage for profile stats ---
            const stats = JSON.parse(localStorage.getItem('samir_stats') || '{}');
            const currentQuizScore = Number(stats.quizScore) || 0;
            
            // Update quiz score (keep highest score)
            if (quizScore > currentQuizScore) {
                stats.quizScore = quizScore;
                localStorage.setItem('samir_stats', JSON.stringify(stats));
                console.log('Updated quiz score:', quizScore);
            }
            
            showQuizResults();
        }

        function showQuizResults() {
            const resultsDiv = document.getElementById('quiz-results');
            const performance = quizScore >= 70 ? 'Ù…Ù…ØªØ§Ø²!' : quizScore >= 50 ? 'Ø¬ÙŠØ¯!' : 'ÙŠØ­ØªØ§Ø¬ ØªØ­Ø³ÙŠÙ†!';
            const emoji = quizScore >= 70 ? 'ğŸ‰' : quizScore >= 50 ? 'ğŸ‘' : 'ğŸ’ª';
            
            resultsDiv.innerHTML = `
                <div class="score">${emoji} Good Job! ${emoji}</div>
                <div class="score">Ù†Ù‚Ø§Ø·Ùƒ: ${quizScore}%</div>
                <p>${performance}</p>
                <button onclick="restartQuiz()" class="quiz-controls" style="margin-top: 20px;">Take Another Quiz / Ø§Ø®ØªØ¨Ø§Ø± Ø¢Ø®Ø±</button>
            `;
            resultsDiv.style.display = 'block';
            document.getElementById('quiz-content').style.display = 'block';
        }

        function restartQuiz() {
            document.getElementById('quiz-selection').style.display = 'block';
            document.getElementById('quiz-content').style.display = 'none';
            document.getElementById('quiz-results').style.display = 'none';
        }
    </script>
</body>
</html>



